import{m as j,n as f,r as y,V as b,j as e,Q as _,B as m,E as w}from"./index-BDKDqaUa.js";import{u as N}from"./index.esm-to8rVDL0.js";import{C as E,a as F}from"./CRow-Drwme9RR.js";import{C as S,a as L}from"./CCardBody-BL8BmauO.js";import{C as R}from"./CForm-BDO8eQcd.js";import{C as q}from"./CCardHeader-Kl_7USnq.js";import{C as x}from"./CFormLabel-BK7n0Pmv.js";import{C as g}from"./CFormInput-mxbnGbwx.js";import{a as I}from"./index.esm-HAxTNc2q.js";import"./CFormControlWrapper-DmXcnnjc.js";import"./CFormControlValidation-BmWcrNFa.js";const G=()=>{var l,d;const s=j(),{register:c,handleSubmit:C,formState:{errors:i},reset:n,watch:u}=N(),o=u("cat_image"),{CateList:r}=f(t=>t.Category);console.log(r),console.log(r),y.useEffect(()=>{s(b())},[s]);const h=async t=>{var p;if((p=r==null?void 0:r.data)==null?void 0:p.some(a=>a.cat_name.toLowerCase()===t.cat_name.toLowerCase())){m.error("Category already exists!",{position:"top-center",autoClose:3e3}),n();return}try{const a=new FormData;a.append("cat_name",t.cat_name),a.append("cat_image",t.cat_image[0]),await s(w(a)),m.success("Category added successfully!",{position:"top-center",autoClose:3e3}),n()}catch(a){console.error("Error:",a),m.error("Something went wrong!",{position:"top-center",autoClose:3e3})}};return e.jsxs(e.Fragment,{children:[e.jsx(E,{children:e.jsx(F,{xs:12,md:12,lg:12,className:"mx-auto",children:e.jsx(S,{className:"mb-4 border-dark shadow-lg bg-dark text-white",children:e.jsxs(R,{onSubmit:C(h),children:[e.jsx(q,{children:e.jsx("strong",{className:"fs-4",children:"üìù Create Product Category"})}),e.jsxs(L,{children:[e.jsx(x,{htmlFor:"cat_name",children:"Category Name"}),e.jsx(g,{id:"cat_name",placeholder:"Enter Product Category",className:"mb-2",...c("cat_name",{required:"Category name is required"})}),e.jsx("p",{className:"text-danger mb-3",children:(l=i.cat_name)==null?void 0:l.message}),e.jsx(x,{htmlFor:"image",children:"Upload Category Image"}),e.jsx(g,{type:"file",id:"cat_image",className:"mb-2",accept:"image/*",...c("cat_image",{required:"Image is required"})}),e.jsx("p",{className:"text-danger mb-3",children:(d=i.image)==null?void 0:d.message}),o&&o[0]&&e.jsx("div",{className:"mb-3 text-center",children:e.jsx("img",{src:URL.createObjectURL(o[0]),alt:"Preview",style:{maxHeight:"150px",borderRadius:"8px"}})}),e.jsx("div",{className:"text-center mt-4",children:e.jsx(I,{color:"success",type:"submit",className:"px-4",children:"Submit"})})]})]})})})}),e.jsx(_,{})]})};export{G as default};
