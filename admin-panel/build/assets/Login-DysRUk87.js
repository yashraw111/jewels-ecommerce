import{k as y,j as s,L as N,w as b,B as a}from"./index-BDKDqaUa.js";import{u as L}from"./index.esm-to8rVDL0.js";import{b as S,c as m,a as o}from"./index.esm-HAxTNc2q.js";import{C as d,a as t}from"./CRow-Drwme9RR.js";import{C as v}from"./CCardGroup-llR5RiCR.js";import{C as p,a as x}from"./CCardBody-BL8BmauO.js";import{C as I}from"./CForm-BDO8eQcd.js";import{C as h,a as u}from"./CInputGroupText-BUaOD9vr.js";import{c as k}from"./cil-user-Ddrdy7PS.js";import{C as g}from"./CFormInput-mxbnGbwx.js";import{c as q}from"./cil-lock-locked-DmxpJbVL.js";import"./CFormControlWrapper-DmXcnnjc.js";import"./CFormControlValidation-BmWcrNFa.js";import"./CFormLabel-BK7n0Pmv.js";const A=()=>{const j=y(),{register:i,handleSubmit:C,formState:{errors:r}}=L({mode:"onTouched"}),f=async w=>{var n,c;try{const e=await b.post("http://localhost:8000/api/admin/login",w,{withCredentials:!0});console.log(e),e.data.success==!0?(a.success("Login successful!"),j("/dashboard")):a.error(e.data.message),localStorage.setItem("admin",JSON.stringify(e.data.user))}catch(e){const l=((c=(n=e==null?void 0:e.response)==null?void 0:n.data)==null?void 0:c.message)||(e==null?void 0:e.message)||"Login failed";console.error("Login error:",l),a.error(l)}};return s.jsx("div",{className:"bg-body-tertiary min-vh-100 d-flex flex-row align-items-center",children:s.jsx(S,{children:s.jsx(d,{className:"justify-content-center",children:s.jsx(t,{md:8,children:s.jsxs(v,{children:[s.jsx(p,{className:"p-4",children:s.jsx(x,{children:s.jsxs(I,{onSubmit:C(f),children:[s.jsx("h1",{children:"Login"}),s.jsx("p",{className:"text-body-secondary",children:"Sign In to your account"}),s.jsxs(h,{className:"mb-3",children:[s.jsx(u,{children:s.jsx(m,{icon:k})}),s.jsx(g,{placeholder:"Email",autoComplete:"email",...i("email",{required:"Email is required",pattern:{value:/^\S+@\S+\.\S+$/,message:"Invalid email format"}})})]}),r.email&&s.jsx("p",{className:"text-danger",children:r.email.message}),s.jsxs(h,{className:"mb-4",children:[s.jsx(u,{children:s.jsx(m,{icon:q})}),s.jsx(g,{type:"password",placeholder:"Password",autoComplete:"current-password",...i("password",{required:"Password is required",minLength:{value:6,message:"Password must be at least 6 characters"}})})]}),r.password&&s.jsx("p",{className:"text-danger",children:r.password.message}),s.jsxs(d,{children:[s.jsx(t,{xs:6,children:s.jsx(o,{type:"submit",color:"primary",className:"px-4",children:"Login"})}),s.jsx(t,{xs:6,className:"text-right",children:s.jsx(o,{color:"link",className:"px-0",children:"Forgot password?"})})]})]})})}),s.jsx(p,{className:"text-white bg-primary py-5",style:{width:"44%"},children:s.jsx(x,{className:"text-center",children:s.jsxs("div",{children:[s.jsx("h2",{children:"Sign up"}),s.jsx("p",{children:"Donâ€™t have an account? Register now to manage products and categories."}),s.jsx(N,{to:"/register",children:s.jsx(o,{color:"primary",className:"mt-3",active:!0,tabIndex:-1,children:"Register Now!"})})]})})})]})})})})})};export{A as default};
