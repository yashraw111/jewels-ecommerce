import{z as w,n as g,r as x,m as _,y as S,A as D,V as E,k as G,j as e,w as F,U as L}from"./index-BDKDqaUa.js";import{u as R}from"./index.esm-to8rVDL0.js";import{C as W,a as I}from"./CRow-Drwme9RR.js";import{C as U,a as V}from"./CCardBody-BL8BmauO.js";import{C as A}from"./CCardHeader-Kl_7USnq.js";import{C as M}from"./CForm-BDO8eQcd.js";import{C as c}from"./CFormLabel-BK7n0Pmv.js";import{C as y}from"./CFormSelect-kkPgdLnK.js";import{C as o}from"./CFormInput-mxbnGbwx.js";import{C as Q}from"./CFormTextarea-DceMqu5E.js";import{a as k}from"./index.esm-HAxTNc2q.js";import"./CFormControlWrapper-DmXcnnjc.js";import"./CFormControlValidation-BmWcrNFa.js";const re=()=>{const{id:b}=w(),{register:t,handleSubmit:j,formState:{errors:s},reset:l,setValue:N}=R(),{ProductList:C}=g(a=>a.product),[f,h]=x.useState(""),{CateList:P}=g(a=>a.Category),{SubCateList:u}=g(a=>a.SubCategory),r=C.find(a=>a._id==b);console.log("singleProduct......................"),console.log(r);const d=_();x.useEffect(()=>{var a;d(S()),d(D()),d(E()),l(r),N((a=r==null?void 0:r.sub_category)==null?void 0:a.sub_category)},[d]),x.useEffect(()=>{var a,i,n;r&&(l({...r,CateGory:(a=r.CateGory)==null?void 0:a._id,sub_category:(i=r.sub_category)==null?void 0:i.category}),h((n=r.CateGory)==null?void 0:n._id))},[r,l]);const p=u==null?void 0:u.filter(a=>a.category._id==f),v=G(),q=async a=>{try{let i=r.productImage;if(a.productImage.length==1){const m=new FormData;m.append("file",a.productImage[0]),m.append("upload_preset","project"),m.append("cloud_name","dd8jcqy60"),i=(await F.post("https://api.cloudinary.com/v1_1/dd8jcqy60/image/upload",m)).data.secure_url}const n={_id:r._id,productName:a.productName,CateGory:a.CateGory,sub_category:a.sub_category,WithoutDiscountPrice:a.WithoutDiscountPrice,productPrice:a.productPrice,productImage:i,rate:a.rate,description:a.description,alreadySold:a.alreadySold,available:a.available,discount:a.discount};d(L(n)),v("/base/ViewList"),l()}catch(i){console.error("Error uploading image:",i)}};return e.jsx(e.Fragment,{children:e.jsx(W,{className:"justify-content-center",children:e.jsx(I,{xs:12,md:8,lg:6,children:e.jsxs(U,{className:"mb-4 shadow-lg",children:[e.jsx(A,{className:"text-center bg-dark text-white py-3",children:e.jsx("strong",{className:"fs-3",children:"Update Product"})}),e.jsx(V,{children:e.jsxs(M,{className:"p-3",onSubmit:j(q),children:[e.jsx(c,{className:"fw-bold",children:"Category"}),e.jsxs(y,{className:"mb-3",...t("CateGory",{required:"Category is required"}),onChange:a=>h(a.target.value),children:[e.jsx("option",{value:"",children:"Select Category"}),P.map((a,i)=>e.jsx("option",{value:a._id,children:a.cat_name},i))]}),s.CateGory&&e.jsx("p",{className:"text-danger",children:s.CateGory.message}),e.jsx(c,{className:"fw-bold",children:"Sub Category"}),e.jsxs(y,{className:"mb-3",...t("sub_category",{required:"Category is required"}),children:[e.jsx("option",{value:"",children:"Select Category"}),p==null?void 0:p.map((a,i)=>e.jsx("option",{value:a==null?void 0:a._id,children:a==null?void 0:a.subcategory},i))]}),s.CateGory&&e.jsx("p",{className:"text-danger",children:s.CateGory.message}),e.jsx(c,{className:"fw-bold",children:"Product Name"}),e.jsx(o,{type:"text",className:"mb-3",placeholder:"Enter Product Name",...t("productName",{required:"Product name is required",minLength:{value:3,message:"Minimum 3 characters required"}})}),s.productName&&e.jsx("p",{className:"text-danger",children:s.productName.message}),e.jsx(c,{className:"fw-bold",children:"Product Price"}),e.jsx(o,{type:"number",className:"mb-3",placeholder:"Enter Product Price",...t("productPrice",{required:"Price is required",min:{value:1,message:"Price must be positive"}})}),s.productPrice&&e.jsx("p",{className:"text-danger",children:s.productPrice.message}),e.jsx(c,{className:"fw-bold",children:"Without Discount Price"}),e.jsx(o,{type:"number",className:"mb-3",placeholder:"Enter Without Discount Price",...t("WithoutDiscountPrice",{required:"Price is required",min:{value:1,message:"Price must be positive"}})}),s.WithoutDiscountPrice&&e.jsx("p",{className:"text-danger",children:s.WithoutDiscountPrice.message}),e.jsx(c,{className:"fw-bold",children:"Rate"}),e.jsx(o,{type:"number",className:"mb-3",placeholder:"Enter Rate (1-5)",...t("rate",{required:"Rate is required",min:{value:1,message:"Minimum 1"},max:{value:5,message:"Maximum 5"}})}),s.rate&&e.jsx("p",{className:"text-danger",children:s.rate.message}),e.jsx(c,{className:"fw-bold",children:"Description"}),e.jsx(Q,{className:"mb-3",placeholder:"Enter Description",...t("description",{required:"Description is required",minLength:{value:10,message:"Minimum 10 characters required"}})}),s.description&&e.jsx("p",{className:"text-danger",children:s.description.message}),e.jsx(c,{className:"fw-bold",children:"Already Sold"}),e.jsx(o,{type:"number",className:"mb-3",placeholder:"Enter Already Sold Quantity",...t("alreadySold",{required:"Enter sold quantity",min:{value:0,message:"Cannot be negative"}})}),s.alreadySold&&e.jsx("p",{className:"text-danger",children:s.alreadySold.message}),e.jsx(c,{className:"fw-bold",children:"Available Quantity"}),e.jsx(o,{type:"number",className:"mb-3",placeholder:"Enter Available Quantity",...t("available",{required:"Enter available quantity",min:{value:0,message:"Cannot be negative"}})}),s.available&&e.jsx("p",{className:"text-danger",children:s.available.message}),e.jsx(c,{className:"fw-bold",children:"Discount (%)"}),e.jsx(o,{type:"number",className:"mb-3",placeholder:"Enter Discount Percentage",...t("discount",{required:"Discount is required",min:{value:0,message:"Cannot be negative"},max:{value:100,message:"Max 100%"}})}),s.discount&&e.jsx("p",{className:"text-danger",children:s.discount.message}),e.jsx(c,{className:"fw-bold",children:"Product Image"}),e.jsx(o,{type:"file",className:"mb-3",...t("image")}),s.image&&e.jsx("p",{className:"text-danger",children:s.image.message}),e.jsx("div",{className:"text-center",children:e.jsx(k,{type:"submit",color:"success",className:"px-4 py-2 fw-bold",children:"Submit Product"})})]})})]})})})})};export{re as default};
